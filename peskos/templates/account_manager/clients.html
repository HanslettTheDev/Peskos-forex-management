{% extends 'layouts/admin_dashboard.html' %}

{% block data %}
<div class="container" style="margin: 10px">
    <button class="js-modal-trigger button is-info" data-target="modal-new-clients">New Client</button>
</div>

{% include 'components/modal_client.html' %}
<div class="table-container">
    <table class="table is-bordered is-striped is-hoverable">
        <thead>
            <tr>
                <th>No</th>
                <th>Name</th>
                <th>Email</th>
                <th>Broker</th>
                <th>Account Type</th>
                <th>Phone No</th>
                <th>2nd Phone No</th>
                <th>ICD</th>
                <th>ID No</th>
                <th>Account Number</th>
                <th>Created By</th>
                <th>Date Joined</th>
                <th>Options</th>
            </tr>
        </thead>
        <tbody>
            {% for client in clients %}
            {% include 'components/del_client_confirm.html' %}
            <tr>
                <td>{{ clients.index(client) + 1 }}</td>
                <td>{{ client.name }}</td>
                <td>{{ client.email }}</td>
                <td>{{ client.broker }}</td>
                <td>{{ client.account_type }}</td>
                <td>{{ client.phone_number }}</td>
                <td>{{ client.second_number }}</td>
                <td>{{ client.icd }}</td>
                <td>{{ client.idcard_number }}</td>
                <td>{{ client.account_number }}</td>
                <td>{{ client.author.first_name }} {{ client.author.last_name }}</td>
                <td>{{ client.date_joined.strftime("%Y-%m-%d %H:%M") }}</td>
                <td>
                    <a class="js-modal-trigger button is-danger" data-target="modal-delete-client">Delete</a> 
                    <a class="button is-warning" href="{{ url_for('account_manager.edit_client', client_id=client.id) }}">Edit</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}